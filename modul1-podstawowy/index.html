<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒ Cyfrowy Odkrywca Åšwiata</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .floating-element {
            position: absolute;
            font-size: 2em;
            opacity: 0.1;
            animation: float 8s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .game-container {
            position: relative;
            z-index: 2;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5em;
            color: #667eea;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .explorer-rank {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4CAF50, #45a049);
            height: 100%;
            transition: width 0.5s ease;
        }

        .level-navigation {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .level-nav-btn {
            background: #e0e0e0;
            border: none;
            padding: 8px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .level-nav-btn:hover {
            background: #d0d0d0;
        }

        .level-nav-btn.active {
            background: #667eea;
            color: white;
        }

        .level-nav-btn.completed {
            background: #4CAF50;
            color: white;
        }

        .level-nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .content {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .start-screen {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        .start-screen h2 {
            font-size: 2.5em;
            color: #667eea;
            margin-bottom: 20px;
        }

        .start-screen p {
            font-size: 1.2em;
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .start-btn, .next-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2em;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .start-btn:hover, .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .level-icon {
            font-size: 6em;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .level-title {
            font-size: 2.5em;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .explanation {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            line-height: 1.6;
        }

        .digital-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .digital-title {
            color: #667eea;
            font-size: 1.5em;
            margin-bottom: 20px;
            text-align: center;
        }

        .question {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
        }

        .question h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .answer-btn {
            display: block;
            width: 100%;
            background: white;
            border: 2px solid #e0e0e0;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-size: 1em;
        }

        .answer-btn:hover {
            background: #f0f0f0;
            border-color: #667eea;
        }

        .answer-btn.correct {
            background: #d4edda;
            border-color: #4CAF50;
            color: #155724;
        }

        .answer-btn.incorrect {
            background: #f8d7da;
            border-color: #f44336;
            color: #721c24;
        }

        .question-hint {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid #2196F3;
            display: none;
        }

        .retry-message {
            background: #fff3cd;
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            border-left: 4px solid #ffc107;
            display: none;
        }

        .reward-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            z-index: 1000;
            max-width: 500px;
            width: 90%;
            text-align: center;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .reward-popup.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        .reward-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .celebration {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .certificate {
            background: linear-gradient(135deg, #fff, #f8f9fa);
            padding: 40px;
            border-radius: 15px;
            margin: 30px 0;
            border: 3px solid #667eea;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .digital-helper-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            z-index: 100;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .digital-helper-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        @media (max-width: 768px) {
            .content {
                padding: 20px 10px;
            }
            
            .level-title {
                font-size: 2em;
            }

            .level-navigation {
                gap: 4px;
            }

            .level-nav-btn {
                padding: 6px 10px;
                font-size: 0.8em;
            }

            .start-screen {
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Floating Digital Elements Background -->
    <div class="floating-elements" id="floatingElements"></div>

    <div class="game-container">
        <div class="header">
            <h1>ğŸŒ Cyfrowy Odkrywca Åšwiata</h1>
            <div class="explorer-rank" id="explorerRank">
                <span>ğŸŒ±</span>
                <span>Cyfrowy PoczÄ…tkujÄ…cy</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="level-navigation" id="levelNavigation">
                <!-- Dynamic navigation buttons -->
            </div>
        </div>

        <div class="content" id="gameContent">
            <!-- Dynamic content -->
        </div>
    </div>

    <button class="digital-helper-btn" onclick="showHelper()">ğŸ¤– Pomoc</button>

    <!-- Reward Popup -->
    <div class="reward-popup" id="rewardPopup">
        <div class="reward-icon" id="rewardIcon">ğŸ‰</div>
        <h2 id="rewardTitle" style="color: #667eea; margin-bottom: 15px;">Poziom UkoÅ„czony!</h2>
        <p id="rewardText" style="font-size: 1.3em; margin-bottom: 20px;"></p>
        <p id="rewardSubText" style="color: #666; margin-bottom: 25px;"></p>
        <div id="rewardButtons"></div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

    <script>
        // Game state
        let currentLevel = 0;
        let completedLevels = [];
        let questionsAnswered = 0;
        let totalQuestions = 0;
        let explorerRank = 'Cyfrowy PoczÄ…tkujÄ…cy';
        let questionAttempts = {};
        let gameStats = {
            startTime: new Date(),
            correctAnswers: 0,
            totalAttempts: 0,
            timeSpent: 0,
            finalTestAttempts: 0
        };

        // Explorer ranks based on progress
        const explorerRanks = [
            { min: 0, max: 0, name: "ğŸŒ± Cyfrowy PoczÄ…tkujÄ…cy", icon: "ğŸŒ±" },
            { min: 1, max: 2, name: "ğŸ” Skaut Wyszukiwania", icon: "ğŸ”" },
            { min: 3, max: 4, name: "ğŸ›¡ï¸ Specjalista BezpieczeÅ„stwa", icon: "ğŸ›¡ï¸" },
            { min: 5, max: 6, name: "ğŸŒ WÄ™drowiec Sieci", icon: "ğŸŒ" },
            { min: 7, max: 8, name: "ğŸ’¡ Cyfrowy Detektyw", icon: "ğŸ’¡" },
            { min: 9, max: 10, name: "ğŸ† Kapitan TreÅ›ci", icon: "ğŸ†" },
            { min: 11, max: 11, name: "ğŸŒŸ Mistrz Cyfrowego Åšwiata", icon: "ğŸŒŸ" }
        ];

        // Level data
        const levels = [
            {
                id: 1,
                title: "Bohater Wyszukiwania",
                icon: "ğŸ”",
                color: "#E74C3C",
                badge: "Uczony Wyszukiwania",
                explanation: `<strong>ğŸ” Zostajesz bohaterem wyszukiwania!</strong><br>
                Musisz przygotowaÄ‡ prezentacjÄ™ o sÅ‚oniach. BÄ™dziesz szukaÄ‡ w internecie, ale nie wszystkie strony internetowe majÄ… dobre informacje! NiektÃ³re strony wymyÅ›lajÄ… rzeczy. Nauczysz siÄ™ jak znajdowaÄ‡ prawdziwe informacje!
                <br><br>
                <strong>âœ… Dobre strony:</strong> Wikipedia, portale edukacyjne, strony szkolne.
                <br><strong>âŒ OstroÅ¼nie z:</strong> Strony sprzedaÅ¼owe, blogi nieznanych osÃ³b.`,
                questions: [
                    {
                        question: "Szukasz informacji o sÅ‚oniach do prezentacji. KtÃ³ra strona jest najbardziej wiarygodna?",
                        answers: [
                            { text: "ğŸ›’ Strona, ktÃ³ra sprzedaje pluszowe sÅ‚onie", correct: false },
                            { text: "ğŸ“š Wikipedia o sÅ‚oniach", correct: true },
                            { text: "ğŸ’¬ Blog kogoÅ›, kto raz widziaÅ‚ sÅ‚onia", correct: false }
                        ]
                    },
                    {
                        question: "Dlaczego Wikipedia jest zazwyczaj wiarygodna do projektÃ³w szkolnych?",
                        answers: [
                            { text: "ğŸ¨ PoniewaÅ¼ ma Å‚adne zdjÄ™cia", correct: false },
                            { text: "ğŸ‘¥ PoniewaÅ¼ wielu ekspertÃ³w sprawdza informacje", correct: true },
                            { text: "ğŸ’° PoniewaÅ¼ jest darmowa", correct: false }
                        ]
                    }
                ]
            },
            {
                id: 2,
                title: "PotwÃ³r Ciasteczek",
                icon: "ğŸª",
                color: "#3498DB",
                badge: "Ochroniarz PrywatnoÅ›ci",
                explanation: `<strong>ğŸª Ciasteczka to nie sÄ… do jedzenia!</strong><br>
                Strony internetowe dajÄ… twojemu komputerowi maÅ‚e pliki (cookies) Å¼eby pamiÄ™taÄ‡ kim jesteÅ›. NiektÃ³re sÄ… przydatne, inne Å›ledzÄ… ciÄ™ wszÄ™dzie!
                <br><br>
                <strong>âœ… Dobre ciasteczka:</strong> PamiÄ™tanie danych logowania.
                <br><strong>âš ï¸ IrytujÄ…ce ciasteczka:</strong> Åšledzenie gdzie klikasz dla reklam.`,
                questions: [
                    {
                        question: "Strona pyta czy chcesz zaakceptowaÄ‡ ciasteczka. Co robisz?",
                        answers: [
                            { text: "âœ… AkceptujÄ™ wszystko - to Å‚atwiejsze", correct: false },
                            { text: "âš™ï¸ AkceptujÄ™ tylko niezbÄ™dne ciasteczka", correct: true },
                            { text: "âŒ Nie akceptujÄ™ nic wcale", correct: false }
                        ]
                    },
                    {
                        question: "Dlaczego strony chcÄ… ci daÄ‡ ciasteczka?",
                        answers: [
                            { text: "ğŸ Å»eby byÄ‡ miÅ‚e", correct: false },
                            { text: "ğŸ“Š Å»eby pamiÄ™taÄ‡ co robisz i pokazywaÄ‡ reklamy", correct: true },
                            { text: "ğŸª PoniewaÅ¼ sÄ… smakowite", correct: false }
                        ]
                    }
                ]
            },
            {
                id: 3,
                title: "Detektyw Reklam",
                icon: "ğŸ“º",
                color: "#F39C12",
                badge: "Tropiciel Reklam",
                explanation: `<strong>ğŸ“º Reklamy sÄ… wszÄ™dzie!</strong><br>
                Na YouTube, w grach, na stronach - wszÄ™dzie firmy prÃ³bujÄ… ci coÅ› sprzedaÄ‡. Jako prawdziwy detektyw nauczysz siÄ™ rozpoznawaÄ‡ reklamy!
                <br><br>
                <strong>ğŸ•µï¸ Rozpoznawanie reklam:</strong> Jest napisane 'Reklama', 'Sponsorowane' lub 'Ad'.`,
                questions: [
                    {
                        question: "Widzisz film na YouTube o 'NAJLEPSZYM TELEFONIE W HISTORII!' Co myÅ›lisz?",
                        answers: [
                            { text: "ğŸ“± To musi byÄ‡ prawda!", correct: false },
                            { text: "ğŸ¤” To prawdopodobnie reklama Å¼eby sprzedaÄ‡ telefony", correct: true },
                            { text: "ğŸ¬ To po prostu zabawny film", correct: false }
                        ]
                    },
                    {
                        question: "Jak rozpoznasz reklamÄ™ w internecie?",
                        answers: [
                            { text: "ğŸ¨ Po Å‚adnych kolorach", correct: false },
                            { text: "ğŸ·ï¸ Jest napisane 'Reklama' lub 'Sponsorowane'", correct: true },
                            { text: "ğŸ“¢ Kiedy brzmi bardzo gÅ‚oÅ›no", correct: false }
                        ]
                    }
                ]
            },
            {
                id: 4,
                title: "StraÅ¼nik Gier",
                icon: "ğŸ®",
                color: "#9B59B6",
                badge: "Bezpieczny Gracz",
                explanation: `<strong>ğŸ® Bezpieczne granie to super sprawa!</strong><br>
                W grach online moÅ¼esz rozmawiaÄ‡ z innymi graczami. Ale nie wszyscy sÄ… mili. Nauczysz siÄ™ jak graÄ‡ bezpiecznie i fajnie!
                <br><br>
                <strong>ğŸ›¡ï¸ Bezpieczne granie:</strong> Rozmawiaj tylko o grze, nie podawaj danych osobowych.`,
                questions: [
                    {
                        question: "W grze ktoÅ› pyta gdzie mieszkasz. Co odpowiadasz?",
                        answers: [
                            { text: "ğŸ  Mieszkam w [twoje miasto]", correct: false },
                            { text: "ğŸ® Porozmawiajmy o grze!", correct: true },
                            { text: "ğŸ¤ Nic nie mÃ³wiÄ™", correct: false }
                        ]
                    },
                    {
                        question: "Dlaczego waÅ¼ne jest Å¼eby w grach rozmawiaÄ‡ tylko o grze?",
                        answers: [
                            { text: "ğŸ¯ Å»eby gra byÅ‚a fajniejsza", correct: false },
                            { text: "ğŸ›¡ï¸ Dla twojego bezpieczeÅ„stwa - nie wiesz kim naprawdÄ™ sÄ… ci ludzie", correct: true },
                            { text: "ğŸ¤– PoniewaÅ¼ komputer tego chce", correct: false }
                        ]
                    }
                ]
            },
            {
                id: 5,
                title: "Ochroniarz Telefonu",
                icon: "ğŸ“±",
                color: "#1ABC9C",
                badge: "ObroÅ„ca UrzÄ…dzeÅ„",
                explanation: `<strong>ğŸ“± Cudzy telefon = ostroÅ¼nie!</strong><br>
                Czasami moÅ¼esz uÅ¼ywaÄ‡ telefonu lub tabletu kogoÅ› innego. Ale nie moÅ¼esz dotykaÄ‡ wszystkiego!
                <br><br>
                <strong>âœ… W porzÄ…dku:</strong> Graj w grÄ™, ktÃ³rÄ… ci pokazali.
                <br><strong>âŒ Nie w porzÄ…dku:</strong> Czytanie wiadomoÅ›ci, przeglÄ…danie zdjÄ™Ä‡, zmienianie ustawieÅ„.`,
                questions: [
                    {
                        question: "MoÅ¼esz uÅ¼ywaÄ‡ iPada babci. Czego NIE robisz?",
                        answers: [
                            { text: "ğŸ® Gram w grÄ™, ktÃ³rÄ… mi pokazaÅ‚a", correct: false },
                            { text: "ğŸ“¸ PatrzÄ™ na jej zdjÄ™cia", correct: true },
                            { text: "ğŸµ SÅ‚ucham muzyki", correct: false }
                        ]
                    },
                    {
                        question: "Dlaczego waÅ¼ne jest Å¼eby nie zaglÄ…daÄ‡ do cudzych wiadomoÅ›ci?",
                        answers: [
                            { text: "ğŸ“± PoniewaÅ¼ telefon siÄ™ zepsuje", correct: false },
                            { text: "ğŸ¤ PoniewaÅ¼ kaÅ¼dy ma prawo do prywatnoÅ›ci", correct: true },
                            { text: "ğŸ® PoniewaÅ¼ wtedy nie moÅ¼esz graÄ‡", correct: false }
                        ]
                    }
                ]
            },
            {
                id: 6,
                title: "Kapitan YouTube",
                icon: "ğŸ¤–",
                color: "#E67E22",
                badge: "DowÃ³dca TreÅ›ci",
                explanation: `<strong>ğŸ¤– YouTube decyduje co widzisz!</strong><br>
                YouTube patrzy na co klikasz i wtedy pokazuje ci wiÄ™cej tego samego. Ale ty jesteÅ› szefem tego co oglÄ…dasz!
                <br><br>
                <strong>ğŸ¯ Ty decydujesz:</strong> Szukaj sam ciekawych filmÃ³w zamiast tylko klikaÄ‡ to co YouTube proponuje.`,
                questions: [
                    {
                        question: "YouTube ciÄ…gle pokazuje straszne filmy. Co moÅ¼esz zrobiÄ‡?",
                        answers: [
                            { text: "ğŸ˜° Po prostu oglÄ…daÄ‡ dalej", correct: false },
                            { text: "ğŸ” SzukaÄ‡ samemu fajnych filmÃ³w", correct: true },
                            { text: "ğŸ“± OdÅ‚oÅ¼yÄ‡ telefon", correct: false }
                        ]
                    },
                    {
                        question: "Dlaczego YouTube czasami pokazuje te same typy filmÃ³w?",
                        answers: [
                            { text: "ğŸ¤– YouTube patrzy na co klikasz i myÅ›li Å¼e ci siÄ™ to podoba", correct: true },
                            { text: "ğŸ® PoniewaÅ¼ sÄ… tylko takie filmy", correct: false },
                            { text: "ğŸ‘¥ PoniewaÅ¼ wszystkie dzieci to oglÄ…dajÄ…", correct: false }
                        ]
                    }
                ]
            },
            {
                id: 7,
                title: "FaÅ‚szywy Detektyw",
                icon: "ğŸ•µï¸",
                color: "#2ECC71",
                badge: "Poszukiwacz Prawdy",
                explanation: `<strong>ğŸ•µï¸ Nie wszystko w internecie jest prawdziwe!</strong><br>
                Ludzie mogÄ… robiÄ‡ faÅ‚szywe zdjÄ™cia, pisaÄ‡ nieprawdziwe historie lub robiÄ‡ Å¼arty. Ty zostaniesz detektywem, ktÃ³ry widzi rÃ³Å¼nicÄ™!
                <br><br>
                <strong>ğŸ¤” Zapytaj siebie:</strong> Czy to brzmi logicznie? Czy inne strony teÅ¼ to majÄ…?`,
                questions: [
                    {
                        question: "Widzisz zdjÄ™cie tÄ™czowego jednoroÅ¼ca w waszym ogrodzie. Co myÅ›lisz?",
                        answers: [
                            { text: "ğŸ¦„ Wow, jednoroÅ¼ce naprawdÄ™ istniejÄ…!", correct: false },
                            { text: "ğŸ¤” To wyglÄ…da na faÅ‚szywe - jednoroÅ¼ce nie istniejÄ…", correct: true },
                            { text: "ğŸ“¸ TeÅ¼ pÃ³jdÄ™ robiÄ‡ zdjÄ™cia", correct: false }
                        ]
                    },
                    {
                        question: "Jak sprawdzasz czy coÅ› jest prawdziwe?",
                        answers: [
                            { text: "ğŸ® Pytam w grze", correct: false },
                            { text: "ğŸ” Szukam w Google czy inne strony teÅ¼ to majÄ…", correct: true },
                            { text: "ğŸ“± Po prostu wierzÄ™", correct: false }
                        ]
                    }
                ]
            },
            {
                id: 8,
                title: "StraÅ¼nik Informacji",
                icon: "ğŸ“Š",
                color: "#34495E",
                badge: "Profesjonalista PrywatnoÅ›ci",
                explanation: `<strong>ğŸ“Š Twoje informacje sÄ… cenne!</strong><br>
                Strony czasami pytajÄ… o twoje imiÄ™, wiek, adres. Ale dlaczego? NiektÃ³re strony naprawdÄ™ tego potrzebujÄ…, inne nie!
                <br><br>
                <strong>ğŸ›¡ï¸ Zasada:</strong> Podawaj prawdziwe informacje tylko za zgodÄ… rodzicÃ³w.`,
                questions: [
                    {
                        question: "Strona z grami prosi o twoje prawdziwe imiÄ™ i adres. Co robisz?",
                        answers: [
                            { text: "âœï¸ WpisujÄ™ - przecieÅ¼ pytajÄ…", correct: false },
                            { text: "ğŸ¤” Najpierw pytam dlaczego tego potrzebujÄ…", correct: true },
                            { text: "ğŸ® Po prostu wymyÅ›lam faÅ‚szywe imiÄ™", correct: false }
                        ]
                    },
                    {
                        question: "Dlaczego strony czasami chcÄ… znaÄ‡ twoje prawdziwe imiÄ™?",
                        answers: [
                            { text: "ğŸ Å»eby wysÅ‚aÄ‡ ci niespodzianki", correct: false },
                            { text: "ğŸ“Š Å»eby uÅ¼ywaÄ‡ twoich danych do reklam lub innych celÃ³w", correct: true },
                            { text: "ğŸ¤– PoniewaÅ¼ komputery tego potrzebujÄ…", correct: false }
                        ]
                    }
                ]
            },
            {
                id: 9,
                title: "Kontroler TreÅ›ci",
                icon: "ğŸ“º",
                color: "#8E44AD",
                badge: "MÄ…dry OglÄ…dacz",
                explanation: `<strong>ğŸ“º Ty jesteÅ› szefem tego co oglÄ…dasz!</strong><br>
                Czasami widzisz rzeczy, ktÃ³re sÄ… straszne, smutne lub nieprzyjemne. To nie twoja wina! Zawsze moÅ¼esz przestaÄ‡ oglÄ…daÄ‡.
                <br><br>
                <strong>ğŸ›¡ï¸ PamiÄ™taj:</strong> JeÅ›li coÅ› ci sprawia strach lub smutek, przestaÅ„ oglÄ…daÄ‡.`,
                questions: [
                    {
                        question: "OglÄ…dasz film i robi ci siÄ™ strach. Co robisz?",
                        answers: [
                            { text: "â¸ï¸ PrzestajÄ™ oglÄ…daÄ‡ i szukam czegoÅ› innego", correct: true },
                            { text: "ğŸ˜° OglÄ…dam dalej bo juÅ¼ zaczÄ…Å‚em", correct: false },
                            { text: "ğŸ‘€ PatrzÄ™ przez palce", correct: false }
                        ]
                    },
                    {
                        question: "SkÄ…d wiesz czy film jest odpowiedni dla ciebie?",
                        answers: [
                            { text: "ğŸ·ï¸ PatrzÄ™ na oznaczenie wieku", correct: true },
                            { text: "ğŸ¨ JeÅ›li ma Å‚adne kolory", correct: false },
                            { text: "â­ JeÅ›li ma duÅ¼o gwiazdek", correct: false }
                        ]
                    }
                ]
            },
            {
                id: 10,
                title: "StraÅ¼nik PieniÄ™dzy",
                icon: "ğŸ’°",
                color: "#E91E63",
                badge: "Mistrz PieniÄ™dzy",
                explanation: `<strong>ğŸ’° Gry chcÄ… twoich pieniÄ™dzy!</strong><br>
                W aplikacjach i grach czasami widzisz: 'Kup monety!' lub 'ZdobÄ…dÅº supermoce za 2,99 zÅ‚!' To sÄ… zakupy w aplikacji. WydajÄ… siÄ™ tanie, ale szybko siÄ™ sumujÄ…!
                <br><br>
                <strong>ğŸ® Zasada:</strong> Nigdy nie kupuj bez zgody rodzicÃ³w!`,
                questions: [
                    {
                        question: "Grasz w darmowÄ… grÄ™ i widzisz: 'Kup 100 diamentÃ³w za 0,99 zÅ‚!' Co robisz?",
                        answers: [
                            { text: "ğŸ’ KupujÄ™, to tylko 99 groszy", correct: false },
                            { text: "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Najpierw pytam rodzicÃ³w", correct: true },
                            { text: "ğŸ® Gram dalej bez kupowania", correct: false }
                        ]
                    },
                    {
                        question: "Dlaczego wiele gier jest 'darmowych' do pobrania?",
                        answers: [
                            { text: "ğŸ PoniewaÅ¼ twÃ³rcy sÄ… mili", correct: false },
                            { text: "ğŸ’° ZarabiajÄ… pieniÄ…dze gdy pÃ³Åºniej kupujesz rzeczy w grze", correct: true },
                            { text: "ğŸ® PoniewaÅ¼ robienie gier nic nie kosztuje", correct: false }
                        ]
                    }
                ]
            }
        ];

        // Initialize game
        function initGame() {
            generateFloatingElements();
            showStartScreen();
            updateLevelNavigation();
            updateExplorerRank();
            
            // Load saved progress
            const saved = localStorage.getItem('cyfrowy-odkrywca-postep');
            if (saved) {
                const progress = JSON.parse(saved);
                completedLevels = progress.completed || [];
                currentLevel = progress.current || 0;
                explorerRank = progress.rank || 'Cyfrowy PoczÄ…tkujÄ…cy';
                gameStats = { ...gameStats, ...progress.stats };
                updateExplorerRank();
            }
        }

        function generateFloatingElements() {
            const elementsContainer = document.getElementById('floatingElements');
            const digitalIcons = ['ğŸ”', 'ğŸª', 'ğŸ“º', 'ğŸ®', 'ğŸ“±', 'ğŸ¤–', 'ğŸ•µï¸', 'ğŸ“Š', 'ğŸ’°', 'ğŸ†˜', 'ğŸŒ'];
            
            for (let i = 0; i < 15; i++) {
                const element = document.createElement('div');
                element.className = 'floating-element';
                element.textContent = digitalIcons[Math.floor(Math.random() * digitalIcons.length)];
                element.style.left = Math.random() * 100 + '%';
                element.style.top = Math.random() * 100 + '%';
                element.style.animationDelay = Math.random() * 8 + 's';
                element.style.animationDuration = (Math.random() * 4 + 6) + 's';
                elementsContainer.appendChild(element);
            }
        }

        function showStartScreen() {
            const content = document.getElementById('gameContent');
            content.innerHTML = `
                <div class="start-screen">
                    <div style="font-size: 6em; margin-bottom: 30px;">ğŸŒğŸš€âœ¨</div>
                    <h2>Witaj Cyfrowy Odkrywco Åšwiata!</h2>
                    <p>ZostaÅ„ prawdziwym cyfrowym podrÃ³Å¼nikiem! Naucz siÄ™ jak mÄ…drze, bezpiecznie i Å›wiadomie poruszaÄ‡ siÄ™ po cyfrowym Å›wiecie. Od wyszukiwania w internecie po bezpieczne granie - zostaniesz panem technologii!</p>
                    <p>ğŸ¯ <strong>Misja:</strong> UkoÅ„cz wszystkie ${levels.length} poziomÃ³w i zostaÅ„ Mistrzem Cyfrowego Åšwiata!</p>
                    <button class="start-btn" onclick="startGame()">ğŸš€ Zacznij PodrÃ³Å¼ OdkrywczÄ…!</button>
                    ${completedLevels.length > 0 ? `<br><button class="next-btn" onclick="continueGame()">ğŸ“– Kontynuuj gdzie skoÅ„czyÅ‚em</button>` : ''}
                </div>
            `;
        }

        function startGame() {
            currentLevel = 1;
            questionsAnswered = 0;
            gameStats.startTime = new Date();
            showLevel(1);
        }

        function continueGame() {
            if (completedLevels.length === levels.length) {
                showCelebration();
            } else {
                showLevel(completedLevels.length + 1);
            }
        }

        function showLevel(levelNum) {
            currentLevel = levelNum;
            const level = levels[levelNum - 1];
            questionsAnswered = 0;
            totalQuestions = level.questions.length;
            questionAttempts = {};
            
            updateProgress();
            updateLevelNavigation();
            
            const content = document.getElementById('gameContent');
            content.innerHTML = `
                <div class="level-icon" style="color: ${level.color}">${level.icon}</div>
                <h2 class="level-title" style="color: ${level.color}">Poziom ${level.id}: ${level.title}</h2>
                
                <div class="explanation" style="border-left-color: ${level.color}">
                    ${level.explanation}
                </div>

                <div class="digital-section">
                    <h3 class="digital-title">ğŸ§  Przetestuj swojÄ… cyfrowÄ… wiedzÄ™!</h3>
                    ${level.questions.map((q, index) => `
                        <div class="question" id="question-${index}">
                            <h3>Pytanie ${index + 1}: ${q.question}</h3>
                            ${q.answers.map((answer, answerIndex) => `
                                <button class="answer-btn" onclick="checkAnswer(this, ${answer.correct}, ${index})">${answer.text}</button>
                            `).join('')}
                            <div class="question-hint" id="hint-${index}">
                                <strong>ğŸ’¡ WskazÃ³wka:</strong> ${getHintForQuestion(q.question)}
                            </div>
                            <div class="retry-message" id="retry-${index}">
                                ğŸŒŸ SprÃ³buj ponownie! Zostaniesz prawdziwym cyfrowym odkrywcÄ…!
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function checkAnswer(button, isCorrect, questionIndex) {
            const question = document.getElementById(`question-${questionIndex}`);
            const buttons = question.querySelectorAll('.answer-btn');
            const hint = document.getElementById(`hint-${questionIndex}`);
            const retry = document.getElementById(`retry-${questionIndex}`);
            
            // Track attempts
            if (!questionAttempts[questionIndex]) {
                questionAttempts[questionIndex] = 0;
            }
            questionAttempts[questionIndex]++;
            gameStats.totalAttempts++;
            
            // Disable all buttons
            buttons.forEach(btn => btn.disabled = true);
            
            if (isCorrect) {
                button.classList.add('correct');
                gameStats.correctAnswers++;
                questionsAnswered++;
                
                // Check if level is complete
                if (questionsAnswered === totalQuestions) {
                    completedLevels.push(currentLevel);
                    saveProgress();
                    updateExplorerRank();
                    
                    setTimeout(() => {
                        if (currentLevel === levels.length) {
                            showCelebration();
                        } else {
                            showReward();
                        }
                    }, 1000);
                }
            } else {
                button.classList.add('incorrect');
                
                // Show hint after first wrong answer
                if (questionAttempts[questionIndex] === 1) {
                    hint.style.display = 'block';
                }
                
                // Show retry message and re-enable buttons after 2 seconds
                retry.style.display = 'block';
                setTimeout(() => {
                    buttons.forEach(btn => {
                        btn.disabled = false;
                        btn.classList.remove('incorrect');
                    });
                    retry.style.display = 'none';
                }, 2000);
            }
        }

        function getHintForQuestion(questionText) {
            const hints = {
                "informacje o sÅ‚oniach": "Strony ktÃ³re sprzedajÄ… informacje czÄ™sto chcÄ… czegoÅ› od ciebie - prawdziwe strony informacyjne jak Wikipedia sÄ… za darmo.",
                "ciasteczka": "Akceptuj tylko te ciasteczka, ktÃ³re sÄ… naprawdÄ™ potrzebne stronie - nie wszystkie Å›ledzÄ…ce cookies.",
                "NAJLEPSZYM TELEFONIE": "JeÅ›li coÅ› brzmi zbyt dobrze Å¼eby byÅ‚o prawdziwe, to prawdopodobnie jest reklamÄ….",
                "gdzie mieszkasz": "W grach rozmawiasz tylko o grze - nigdy o rzeczach osobistych.",
                "iPada babci": "Szanuj prywatnoÅ›Ä‡ innych - rÃ³b tylko to na co masz pozwolenie.",
                "straszne filmy": "Ty decydujesz co oglÄ…dasz - szukaj sam fajnych filmÃ³w.",
                "tÄ™czowego jednoroÅ¼ca": "JeÅ›li coÅ› brzmi zbyt szalone Å¼eby byÅ‚o prawdziwe, prawdopodobnie nie jest.",
                "prawdziwe imiÄ™ i adres": "Zapytaj siebie: dlaczego ta gra potrzebuje mojego prawdziwego adresu?",
                "robi ci siÄ™ strach": "Ty jesteÅ› szefem tego co oglÄ…dasz - jeÅ›li coÅ› jest straszne, moÅ¼esz zawsze przestaÄ‡.",
                "100 diamentÃ³w za 0,99 zÅ‚": "Czyje pieniÄ…dze byÅ› wydawaÅ‚? Zawsze najpierw pytaj rodzicÃ³w."
            };
            
            for (let key in hints) {
                if (questionText.toLowerCase().includes(key)) {
                    return hints[key];
                }
            }
            return "PomyÅ›l dobrze o tym czego nauczyÅ‚eÅ› siÄ™ w tym poziomie!";
        }

        function showReward() {
            const level = levels[currentLevel - 1];
            const firstTryCorrect = Object.values(questionAttempts).filter(attempts => attempts === 1).length;
            const badgeEarned = firstTryCorrect === totalQuestions;
            
            document.getElementById('rewardIcon').textContent = badgeEarned ? 'ğŸ†' : 'ğŸ‰';
            document.getElementById('rewardTitle').textContent = badgeEarned ? 'Poziom Opanowany! ğŸ‰' : 'Poziom UkoÅ„czony!';
            
            if (badgeEarned) {
                document.getElementById('rewardText').innerHTML = `ZdobyÅ‚eÅ› odznakÄ™ "${level.badge}"! ${level.icon}`;
                document.getElementById('rewardSubText').innerHTML = `Super! ZrozumiaÅ‚eÅ› ${firstTryCorrect} z ${totalQuestions} pytaÅ„ od razu dobrze!`;
            } else {
                document.getElementById('rewardText').innerHTML = `UkoÅ„czyÅ‚eÅ› poziom ${currentLevel}! ğŸ¯`;
                document.getElementById('rewardSubText').innerHTML = `DuÅ¼o siÄ™ nauczyÅ‚eÅ›! SprÃ³buj nastÄ™pnym razem odpowiedzieÄ‡ na pytania za pierwszym razem Å¼eby zdobyÄ‡ odznakÄ™.`;
            }
            
            document.getElementById('rewardButtons').innerHTML = `
                <button class="next-btn" onclick="closeReward(); showLevel(${currentLevel + 1});">ğŸš€ Do Poziomu ${currentLevel + 1}!</button>
                <br><button class="next-btn" onclick="closeReward(); showStartScreen();">ğŸ  PowrÃ³t do Startu</button>
            `;
            
            document.getElementById('rewardPopup').classList.add('show');
            document.getElementById('overlay').classList.add('show');
        }

        function showCelebration() {
            gameStats.timeSpent = Math.round((new Date() - gameStats.startTime) / 60000);
            const accuracy = Math.round((gameStats.correctAnswers / gameStats.totalAttempts) * 100);
            
            explorerRank = "ğŸŒŸ Mistrz Cyfrowego Åšwiata";
            saveProgress();
            updateExplorerRank();
            
            // Notify parent window of completion
            if (window.parent && window.parent !== window) {
                window.parent.postMessage({
                    type: 'moduleCompleted',
                    module: 'cyfrowy-odkrywca-swiata',
                    moduleName: 'Cyfrowy Odkrywca Åšwiata'
                }, '*');
            }
            
            const content = document.getElementById('gameContent');
            content.innerHTML = `
                <div class="celebration">
                    <div style="font-size: 6em; margin-bottom: 30px;">ğŸ‰ğŸŒğŸ‰</div>
                    <h2 style="color: #667eea; font-size: 3em; margin-bottom: 30px;">GRATULACJE!</h2>
                    
                    <div class="certificate">
                        <h3 style="font-size: 2.5em; margin-bottom: 20px;">ğŸŒŸ CERTYFIKAT MISTRZA CYFROWEGO ÅšWIATA ğŸŒŸ</h3>
                        <p style="font-size: 1.5em; margin-bottom: 15px;">Ten certyfikat zostaje przyznany:</p>
                        <h2 style="font-size: 2em; margin-bottom: 20px;">Cyfrowy Odkrywca Åšwiata</h2>
                        <p style="font-size: 1.2em;">Za pomyÅ›lne ukoÅ„czenie wszystkich poziomÃ³w cyfrowej edukacji<br>
                        i zdobycie statusu Mistrza Cyfrowego Åšwiata!</p>
                        <p style="margin-top: 20px; font-size: 1em;">ğŸŒ JesteÅ› teraz prawdziwym cyfrowym podrÃ³Å¼nikiem! ğŸŒ</p>
                    </div>

                    <div style="display: flex; justify-content: space-around; margin: 30px 0;">
                        <div style="text-align: center;">
                            <div style="font-size: 2em; font-weight: bold; color: #667eea;">${completedLevels.length}/10</div>
                            <div>PoziomÃ³w UkoÅ„czonych</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2em; font-weight: bold; color: #667eea;">${accuracy}%</div>
                            <div>DokÅ‚adnoÅ›Ä‡</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2em; font-weight: bold; color: #667eea;">${gameStats.timeSpent}</div>
                            <div>Minut Gry</div>
                        </div>
                    </div>

                    <button class="start-btn" onclick="showStartScreen()">ğŸ  PowrÃ³t do Startu</button>
                </div>
            `;
        }

        function updateProgress() {
            const progressFill = document.getElementById('progressFill');
            const progress = (completedLevels.length / levels.length) * 100;
            progressFill.style.width = progress + '%';
        }

        function updateLevelNavigation() {
            const navigation = document.getElementById('levelNavigation');
            navigation.innerHTML = levels.map((level, index) => {
                const levelNum = index + 1;
                const isCompleted = completedLevels.includes(levelNum);
                const isActive = levelNum === currentLevel;
                const isAccessible = levelNum <= completedLevels.length + 1;
                
                return `<button class="level-nav-btn ${isActive ? 'active' : ''} ${isCompleted ? 'completed' : ''}" 
                    onclick="${isAccessible ? `showLevel(${levelNum})` : 'void(0)'}" 
                    ${!isAccessible ? 'disabled' : ''}>
                    ${level.icon} ${levelNum}
                </button>`;
            }).join('');
        }

        function updateExplorerRank() {
            const completedCount = completedLevels.length;
            let newRank = explorerRanks.find(rank => completedCount >= rank.min && completedCount <= rank.max);
            
            if (newRank) {
                explorerRank = newRank.name;
                document.getElementById('explorerRank').innerHTML = `
                    <span>${newRank.icon}</span>
                    <span>${explorerRank}</span>
                `;
            }
        }

        function saveProgress() {
            localStorage.setItem('cyfrowy-odkrywca-postep', JSON.stringify({
                completed: completedLevels,
                current: currentLevel,
                rank: explorerRank,
                stats: gameStats
            }));
        }

        function closeReward() {
            document.getElementById('rewardPopup').classList.remove('show');
            document.getElementById('overlay').classList.remove('show');
        }

        function showHelper() {
            alert('ğŸ’¡ WskazÃ³wki dla Cyfrowego Odkrywcy Åšwiata:\n\n' +
                'ğŸ” Zawsze szukaj na wiarygodnych stronach\n' +
                'ğŸª Akceptuj tylko niezbÄ™dne ciasteczka\n' +
                'ğŸ“º Rozpoznawaj reklamy po etykietach jak "Reklama"\n' +
                'ğŸ® W grach rozmawiaj tylko o grze\n' +
                'ğŸ“± Szanuj prywatnoÅ›Ä‡ innych\n' +
                'ğŸ¤– Ty decydujesz co oglÄ…dasz na YouTube\n' +
                'ğŸ•µï¸ Pytaj siebie: czy to jest logiczne?\n' +
                'ğŸ“Š Podawaj informacje tylko za zgodÄ… rodzicÃ³w\n' +
                'ğŸ“º PrzestaÅ„ oglÄ…daÄ‡ jeÅ›li coÅ› jest straszne\n' +
                'ğŸ’° Zawsze pytaj najpierw przed kupowaniem');
        }

        // Initialize game when page loads
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>